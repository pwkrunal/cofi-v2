-- testDb.batchStatus definition

CREATE TABLE `batchStatus` (
  `id` int NOT NULL AUTO_INCREMENT,
  `batchDate` varchar(20) DEFAULT (NULL),
  `currentBatch` tinyint(1) DEFAULT '0',
  `batchStatus` enum('Pending','InProgress','Complete') CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'Pending',
  `dbInsertionStatus` enum('Pending','InProgress','Complete') DEFAULT 'Pending',
  `lidStatus` enum('Pending','InProgress','Complete') CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'Pending',
  `sttStatus` enum('Pending','InProgress','Complete') CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'Pending',
  `llm1Status` enum('Pending','InProgress','Complete') CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'Pending',
  `llm2Status` enum('Pending','InProgress','Complete') CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'Pending',
  `callmetadataStatus` tinyint(1) DEFAULT '0',
  `trademetadataStatus` tinyint(1) DEFAULT '0',
  `triagingStatus` enum('Pending','InProgress','Complete') CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'Pending',
  `triagingStep2Status` enum('Pending','InProgress','Complete') CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'Pending',
  `remarks` text DEFAULT (NULL),
  `createdAt` datetime DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` datetime DEFAULT CURRENT_TIMESTAMP,
  `batchStartTime` varchar(100) DEFAULT NULL,
  `batchEndTime` varchar(100) DEFAULT NULL,
  `dbInsertionStartTime` varchar(100) DEFAULT NULL,
  `dbInsertionEndTime` varchar(100) DEFAULT NULL,
  `ivrStartTime` varchar(100) DEFAULT NULL,
  `ivrEndTime` varchar(100) DEFAULT NULL,
  `lidStartTime` varchar(100) DEFAULT NULL,
  `lidEndTime` varchar(100) DEFAULT NULL,
  `sttStartTime` varchar(100) DEFAULT NULL,
  `sttEndTime` varchar(100) DEFAULT NULL,
  `llm1StartTime` varchar(100) DEFAULT NULL,
  `llm1EndTime` varchar(100) DEFAULT NULL,
  `llm2StartTime` varchar(100) DEFAULT NULL,
  `llm2EndTime` varchar(100) DEFAULT NULL,
  `triaggingStartTime` varchar(100) DEFAULT NULL,
  `triaggingEndTime` varchar(100) DEFAULT NULL,
  `triagingStep2StartTime` varchar(100) DEFAULT NULL,
  `triagingStep2EndTime` varchar(100) DEFAULT NULL,
  `step1StartTime` varchar(100) DEFAULT NULL,
  `step1EndTime` varchar(100) DEFAULT NULL,
  `denoiseStartTime` varchar(100) DEFAULT NULL,
  `denoiseEndTime` varchar(100) DEFAULT NULL,
  `denoiseStatus` enum('Pending','InProgress','Complete') DEFAULT NULL,
  `ivrStatus` enum('Pending','InProgress','Complete') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- testDb.`call` definition

CREATE TABLE `call` (
  `id` int NOT NULL AUTO_INCREMENT,
  `processId` int DEFAULT NULL,
  `auditFormId` int DEFAULT NULL,
  `categoryMappingId` int DEFAULT NULL,
  `callId` varchar(200) DEFAULT NULL,
  `userId` int DEFAULT NULL,
  `languageId` int DEFAULT NULL,
  `audioUrl` varchar(500) DEFAULT NULL,
  `audioName` varchar(255) DEFAULT NULL,
  `audioDuration` float DEFAULT NULL,
  `processingTime` float DEFAULT NULL,
  `summary` text,
  `qaNotes` text,
  `confidence` float DEFAULT NULL,
  `wordConfidence` float DEFAULT NULL,
  `emotion` varchar(45) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `enthusiasm` varchar(45) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `rateOfSpeech` text,
  `engagement` text,
  `callOpening` text,
  `holdManagement` text,
  `tonalAnalysis` text,
  `lang` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,
  `type` enum('Call','Chat','Email','Document') CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'Call',
  `status` enum('Pending','InProgress','Transcription','TranscriptDone','Auditing','AuditDone','Summary','Sentiment','QaNotes','Complete','UnsupportedLanguage','ShortCall') DEFAULT 'Pending',
  `metaData` text,
  `translationStatus` enum('Pending','In Progress','Complete') DEFAULT 'Pending',
  `transliterationStatus` enum('Pending','In Progress','Complete') DEFAULT 'Pending',
  `createdAt` datetime DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `batchId` int DEFAULT NULL,
  `category` text,
  `subCategory` text,
  `ip` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `callProcessId` (`processId`) USING BTREE,
  KEY `auditFormId_idx` (`auditFormId`) USING BTREE,
  KEY `call_ibfk_3_idx` (`categoryMappingId`),
  KEY `call_idfk_4_idx` (`userId`),
  KEY `call_idfk_5_idx` (`languageId`),
  KEY `call_ibfk_3_idx1` (`languageId`) USING BTREE,
  KEY `call_ibfk_5_idx` (`languageId`) USING BTREE,
  KEY `FK_call_batchId_batchStatus` (`batchId`) USING BTREE,
  KEY `call_idfk_6` (`batchId`) USING BTREE,
  KEY `idx_audioName` (`audioName`),
  CONSTRAINT `call_ibfk_1` FOREIGN KEY (`processId`) REFERENCES `process` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `call_ibfk_2` FOREIGN KEY (`auditFormId`) REFERENCES `auditForm` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `call_idfk_3` FOREIGN KEY (`categoryMappingId`) REFERENCES `categoryMapping` (`id`),
  CONSTRAINT `call_idfk_4` FOREIGN KEY (`userId`) REFERENCES `user` (`id`),
  CONSTRAINT `call_idfk_5` FOREIGN KEY (`languageId`) REFERENCES `language` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `fk_batch` FOREIGN KEY (`batchId`) REFERENCES `batchStatus` (`id`),
  CONSTRAINT `FK_call_batchId_batchStatus` FOREIGN KEY (`batchId`) REFERENCES `batchStatus` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=107946 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


-- testDb.`call` definition

CREATE TABLE `call` (
  `id` int NOT NULL AUTO_INCREMENT,
  `processId` int DEFAULT NULL,
  `auditFormId` int DEFAULT NULL,
  `categoryMappingId` int DEFAULT NULL,
  `callId` varchar(200) DEFAULT NULL,
  `userId` int DEFAULT NULL,
  `languageId` int DEFAULT NULL,
  `audioUrl` varchar(500) DEFAULT NULL,
  `audioName` varchar(255) DEFAULT NULL,
  `audioDuration` float DEFAULT NULL,
  `processingTime` float DEFAULT NULL,
  `summary` text,
  `qaNotes` text,
  `confidence` float DEFAULT NULL,
  `wordConfidence` float DEFAULT NULL,
  `emotion` varchar(45) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `enthusiasm` varchar(45) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `rateOfSpeech` text,
  `engagement` text,
  `callOpening` text,
  `holdManagement` text,
  `tonalAnalysis` text,
  `lang` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,
  `type` enum('Call','Chat','Email','Document') CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT 'Call',
  `status` enum('Pending','InProgress','Transcription','TranscriptDone','Auditing','AuditDone','Summary','Sentiment','QaNotes','Complete','UnsupportedLanguage','ShortCall') DEFAULT 'Pending',
  `metaData` text,
  `translationStatus` enum('Pending','In Progress','Complete') DEFAULT 'Pending',
  `transliterationStatus` enum('Pending','In Progress','Complete') DEFAULT 'Pending',
  `createdAt` datetime DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `batchId` int DEFAULT NULL,
  `category` text,
  `subCategory` text,
  `ip` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `callProcessId` (`processId`) USING BTREE,
  KEY `auditFormId_idx` (`auditFormId`) USING BTREE,
  KEY `call_ibfk_3_idx` (`categoryMappingId`),
  KEY `call_idfk_4_idx` (`userId`),
  KEY `call_idfk_5_idx` (`languageId`),
  KEY `call_ibfk_3_idx1` (`languageId`) USING BTREE,
  KEY `call_ibfk_5_idx` (`languageId`) USING BTREE,
  KEY `FK_call_batchId_batchStatus` (`batchId`) USING BTREE,
  KEY `call_idfk_6` (`batchId`) USING BTREE,
  KEY `idx_audioName` (`audioName`),
  CONSTRAINT `call_ibfk_1` FOREIGN KEY (`processId`) REFERENCES `process` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `call_ibfk_2` FOREIGN KEY (`auditFormId`) REFERENCES `auditForm` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `call_idfk_3` FOREIGN KEY (`categoryMappingId`) REFERENCES `categoryMapping` (`id`),
  CONSTRAINT `call_idfk_4` FOREIGN KEY (`userId`) REFERENCES `user` (`id`),
  CONSTRAINT `call_idfk_5` FOREIGN KEY (`languageId`) REFERENCES `language` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `fk_batch` FOREIGN KEY (`batchId`) REFERENCES `batchStatus` (`id`),
  CONSTRAINT `FK_call_batchId_batchStatus` FOREIGN KEY (`batchId`) REFERENCES `batchStatus` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=107946 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


-- testDb.lidStatus definition

CREATE TABLE `lidStatus` (
  `id` int NOT NULL AUTO_INCREMENT,
  `audioName` varchar(100) DEFAULT NULL,
  `language` varchar(100) DEFAULT NULL,
  `lidProcessingTime` varchar(100) DEFAULT NULL,
  `batchId` int DEFAULT '0',
  `createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `audioDuration` float DEFAULT NULL,
  `ip` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=15326 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- testDb.ivr definition

CREATE TABLE `fileDistribution` (
  `file` varchar(255) DEFAULT NULL,
  `ip` varchar(100) DEFAULT NULL,
   ivrDone int DEFAULT '0',
  lidDone int DEFAULT '0',
sttDone int DEFAULT '0',
llm1Done int DEFAULT '0',
llm2Done int DEFAULT '0',
`batchId` int DEFAULT '0',

) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- testDb.`language` definition

CREATE TABLE `language` (
  `id` int NOT NULL AUTO_INCREMENT,
  `languageCode` varchar(20) DEFAULT NULL,
  `languageText` varchar(25) DEFAULT NULL,
  `isDisabled` tinyint(1) DEFAULT NULL,
  `isHidden` tinyint(1) DEFAULT NULL,
  `createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=201 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- testDb.process definition

CREATE TABLE `process` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(50) DEFAULT NULL,
  `customerName` varchar(25) DEFAULT NULL,
  `businessUnitName` varchar(45) DEFAULT NULL,
  `auditFormId` int DEFAULT NULL,
  `auditTypeId` int DEFAULT NULL,
  `processTypeId` int DEFAULT NULL,
  `languageId` int DEFAULT NULL,
  `requestType` enum('sttwithllm','stt','llm','sttwithllmsummary','sequential') DEFAULT NULL,
  `createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  KEY `processTypeId_idx` (`processTypeId`) USING BTREE,
  KEY `auditTypeId_idx` (`auditTypeId`) USING BTREE,
  KEY `languageId_idx` (`languageId`) USING BTREE,
  KEY `auditFormId_idx` (`auditFormId`) USING BTREE,
  CONSTRAINT `process_ibfk_1` FOREIGN KEY (`auditFormId`) REFERENCES `auditForm` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `process_ibfk_2` FOREIGN KEY (`auditTypeId`) REFERENCES `auditType` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `process_ibfk_3` FOREIGN KEY (`processTypeId`) REFERENCES `processType` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `process_ibfk_4` FOREIGN KEY (`languageId`) REFERENCES `language` (`id`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- testDb.callMetadata definition

CREATE TABLE `callMetadata` (
  `id` int NOT NULL AUTO_INCREMENT,
  `nId` int DEFAULT NULL,
  `sClientId` varchar(200) DEFAULT NULL,
  `sClientName` varchar(250) DEFAULT NULL,
  `sClientMobileNumber` varchar(20) DEFAULT NULL,
  `nBranchId` varchar(250) DEFAULT NULL,
  `sBranchName` varchar(250) DEFAULT NULL,
  `sSessionId` varchar(75) DEFAULT NULL,
  `dCallStartTime` varchar(75) DEFAULT NULL,
  `dCallEndTime` varchar(75) DEFAULT NULL,
  `nCallType` varchar(250) DEFAULT NULL,
  `nCallStatus` varchar(75) DEFAULT NULL,
  `sAgentId` varchar(75) DEFAULT NULL,
  `sAgentName` varchar(200) DEFAULT NULL,
  `sAgentMobileNumber` varchar(20) DEFAULT NULL,
  `sRecordingFileName` varchar(500) DEFAULT NULL,
  `sRecordingUrl` text,
  `nTagId` varchar(20) DEFAULT NULL,
  `sRemark` text,
  `dLastUpdateTime` varchar(75) DEFAULT NULL,
  `nFeedBack` varchar(500) DEFAULT NULL,
  `nIsAdd` int DEFAULT NULL,
  `sSIPChannel` varchar(500) DEFAULT NULL,
  `callStartDate` varchar(50) DEFAULT NULL,
  `callStartTime` varchar(50) DEFAULT NULL,
  `callEndDate` varchar(50) DEFAULT NULL,
  `callEndTime` varchar(50) DEFAULT NULL,
  `createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `batchId` int DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `fk_callmetabatch` (`batchId`),
  CONSTRAINT `fk_callmetabatch` FOREIGN KEY (`batchId`) REFERENCES `batchStatus` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=144506 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


-- testDb.tradeMetadata definition

CREATE TABLE `tradeMetadata` (
  `id` int NOT NULL AUTO_INCREMENT,
  `orderId` varchar(100) DEFAULT NULL,
  `clientCode` varchar(50) DEFAULT NULL,
  `clientName` varchar(200) DEFAULT NULL,
  `regNumber` varchar(200) DEFAULT NULL,
  `alName` varchar(100) DEFAULT NULL,
  `alNumber` varchar(100) DEFAULT NULL,
  `alRelation` varchar(100) DEFAULT NULL,
  `tradeDate` varchar(100) DEFAULT NULL,
  `orderPlacedTime` varchar(100) DEFAULT NULL,
  `buySell` varchar(100) DEFAULT NULL,
  `instType` varchar(100) DEFAULT NULL,
  `expiryDate` varchar(100) DEFAULT NULL,
  `optionType` varchar(100) DEFAULT NULL,
  `symbol` varchar(100) DEFAULT NULL,
  `comScriptCode` varchar(100) DEFAULT NULL,
  `scripName` varchar(100) DEFAULT NULL,
  `strikePrice` varchar(100) DEFAULT NULL,
  `tradeQuantity` int DEFAULT NULL,
  `tradePrice` double DEFAULT NULL,
  `tradeValue` int DEFAULT NULL,
  `lotQty` int DEFAULT NULL,
  `userId` varchar(100) DEFAULT NULL,
  `dealerCodeSbMainCode` varchar(100) DEFAULT NULL,
  `dealerNameSuBrokerName` varchar(100) DEFAULT NULL,
  `dealerEmailId` varchar(100) DEFAULT NULL,
  `dealingBranch` varchar(500) DEFAULT NULL,
  `dealingZone` varchar(500) DEFAULT NULL,
  `dealingState` varchar(500) DEFAULT NULL,
  `dealingCity` varchar(500) DEFAULT NULL,
  `voiceRecordingConfirmations` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `matchingStatus` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `dataMissing` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,
  `audioFileName` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,
  `audioCallRef` int DEFAULT NULL,
  `createdAt` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `batchId` int DEFAULT NULL,
  `processId` int DEFAULT NULL,
  `loginId` varchar(255) DEFAULT NULL,
  `digit12` varchar(255) DEFAULT NULL,
  `originalExchangeCode` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_tradeMetadata_batchId_batchStatus` (`batchId`),
  KEY `fk_tradeMetadata_callId_audioCallRef_idx` (`audioCallRef`) USING BTREE,
  KEY `idx_orderId` (`orderId`),
  KEY `idx_batchId` (`batchId`),
  KEY `idx_batch_voice` (`batchId`,`voiceRecordingConfirmations`),
  KEY `idx_voice_confirmations` (`voiceRecordingConfirmations`),
  CONSTRAINT `fk_tradebatch` FOREIGN KEY (`batchId`) REFERENCES `batchStatus` (`id`),
  CONSTRAINT `FK_tradeMetadata_batchId_batchStatus` FOREIGN KEY (`batchId`) REFERENCES `batchStatus` (`id`),
  CONSTRAINT `fk_tradeMetadata_callId_audioCallRef` FOREIGN KEY (`audioCallRef`) REFERENCES `call` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=671132 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;