version: '3.8'

services:
  cofi-mediator:
    build: .
    container_name: cofi-mediator-service
    ports:
      - "${PORT:-5065}:5065"
    environment:
      - STORAGE_PATH=${STORAGE_PATH:-/audio_files}
      - PORT=${PORT:-5065}
      - HOST=0.0.0.0
    volumes:
      # Mount Docker socket to allow container management
      - /var/run/docker.sock:/var/run/docker.sock
      # Mount storage path
      - ${STORAGE_PATH:-./audio_files}:/audio_files
    networks:
      - auditnex-network
    restart: unless-stopped

networks:
  auditnex-network:
    external: true
